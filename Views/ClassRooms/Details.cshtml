@{
    var isEnrolled = ViewBag.IsEnrolled ?? false;
    var isInstructor = ViewBag.IsInstructor ?? false;
}

@if (!isEnrolled && !isInstructor)
{
    <form asp-controller="Enrollments" asp-action="Enroll" method="post">
        <input type="hidden" name="classId" value="@Model.Id" />
        <div class="mb-3">
            <input type="password" name="password" placeholder="Mật khẩu ghi danh (nếu có)" class="form-control" />
        </div>
        <button type="submit" class="btn btn-primary">Ghi danh</button>
    </form>
}
else
{
    <div>
        <h4>Nội dung khóa học:</h4>
        @foreach (var block in ((IEnumerable<CourseManagement.Models.ContentBlock>)Model.ContentBlocks).OrderBy(cb => cb.Order))
        {
            <div class="mb-3 p-2 border rounded">
                @Html.Raw(block.Content)
            </div>
        }

        @foreach (var a in Model.Assignments)
        {
            <div class="mb-3 p-3 border bg-light">
                <h5>@a.Title</h5>
                <p>@a.Description</p>
                <a class="btn btn-sm btn-primary" href="@Url.Action("Take", "Assignments", new { id = a.Id })">Làm bài</a>
            </div>
        }
    </div>
}
